---
title: mybatis中#和$的区别
date: 2018-03-16
tags: [mybatis, sql注入]
---
#### 什么是SQL注入
  利用现有应用程序，将恶意的SQL命令注入到后台数据库执行一些恶意的操作。

#### 防止策略
1. 严格限制web应用的数据库操作权限，给此用户提供仅仅能满足其工作的最低权限，从而最大限度的减少注入攻击对数据库的伤害
<!-- more -->
2. 检查输入的数据是否具有所期望的数据格式，严格限制变量的类型
3. 对进入数据库的特殊字符(' " \进括号 & * ;等)进行转义处理，或编码转换

#### mybatis的#和$的区别到底是什么
    在JDBC中，主要使用两种语句，一种是支持参数化和预编译的PrepareStatement，能够支持原生的sql，也支持设置占位符的方式，参数化输入的参数，防止sql注入；
另一种是支持原生sql的statement，有sql注入的风险。在我们进行开发的过程中，隐藏了底层的细节，我们通过$和#告诉mybatis，我们要进行那种操作，是需要对语句
进行参数化还是保持原生状态就好。
1. 使用#入参，mybatis会生成PrepareStatement并且可以安全调设置参数的值，因为sql语句已经预编译好了，传入参数的时候，不会重新生成sql语句，安全性高。
2. ${ } 变量的替换阶段是在动态 SQL 解析阶段，而 #{ }变量的替换是在 DBMS 中。

